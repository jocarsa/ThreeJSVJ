<html>
    <head>
        <script src="lib/three.min.js"></script>
         <script src="lib/CanvasRenderer.js"></script>
        <script src="lib/Projector.js"></script>
        <script src="lib/stats.min.js"></script>
        <script src="lib/physi.js"></script>
    </head>
    <body>
        <script>
            Physijs.scripts.worker = 'lib/physijs_worker.js';
	        Physijs.scripts.ammo = 'ammo.js';
             var container;
			var camera;
			var scene;
			var renderer;
			
			init()
			animate()
			
			function init(){
			    container = document.createElement( 'div' );
				document.body.appendChild( container );
				camera = new THREE.PerspectiveCamera( 75, window.innerWidth / window.innerHeight, 1, 3000 );
				camera.position.z = 60;
				camera.position.y = 20;
				camera.rotation.x = 0-Math.PI/10
				//scene = new THREE.Scene();
				scene = new Physijs.Scene({fixedTimeStep:1/120})
				scene.setGravity(new THREE.Vector3(0,-10,0));
			    stats = new Stats();
			    
			    
			    // AÃ±ado un par de elementos
			    for(var i = 0;i<1000;i++){
			     cubo = new THREE.BoxGeometry(1,1,1);
			      //material = new THREE.MeshPhongMaterial({color:0xff0000});
			      material = new Physijs.createMaterial(
			          new THREE.MeshPhongMaterial({color:0xff0000}),
			          0.4,
			          0.4
			          );
			       micubo = new Physijs.BoxMesh(cubo,material);
                   micubo.position.x = (Math.random()*10-5)*20;
                   micubo.position.y = Math.random()*10-5+20;
                   micubo.position.z = (Math.random()*10-5)*20;
                   micubo.rotation.y = Math.PI/9
                   micubo.rotation.z = Math.PI/7
                   micubo.rotation.x = Math.PI/3
                   scene.add(micubo);
			    }
                   
                   suelo = new THREE.BoxGeometry(55,5,55);
			       materialsuelo = new Physijs.createMaterial(
			          new THREE.MeshPhongMaterial({color:0xffffff}),
			          0.4,
			          0.4
			          );
			       misuelo = new Physijs.BoxMesh(suelo,materialsuelo,0);
                   misuelo.position.x = 0;
                   misuelo.position.y = 0;
                   misuelo.position.z = 0;
                   misuelo.rotation.y = Math.PI/4
                   scene.add(misuelo);
                   
                   luz = new THREE.PointLight( 0xffffff, 2, 1000 );
                luz.position.set( 100, 100, 100 );
                scene.add( luz );
                
                 ambiente = new THREE.AmbientLight( 0xffffff, 0.5 );
               
                scene.add( ambiente );
			    
				container.appendChild( stats.dom );
			    renderer = new THREE.WebGLRenderer();
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				container.appendChild( renderer.domElement );
				}
				
			function animate() {
			    scene.simulate();
				requestAnimationFrame( animate );
				render();
				stats.update();
			}
			function render() {
				
				
				renderer.render( scene, camera );
			}
        </script>
    </body>
</html>